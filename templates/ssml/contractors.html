{% extends 'ssml/ssmlbase.html' %}
{% load static %}

{% block body %}

<div class="card-header">
    <h5 class="card-title">Contractors</h5>
</div>
<div class="card-body">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th colspan="4" class="text-center"></th>
                <th colspan="3" class="text-center">Balance</th>
                <th></th>
            </tr>
            <tr>
                <th colspan="4" class="text-center"></th>
                <th colspan="2" style="width: 100px;" class="text-center">RECIEVABLE</th>
                <th colspan="5"></th>
            </tr>
            <tr>
                <th>Name</th>
                <th>RP</th>
                <th>Contact</th>
                <th>Address</th>
                <th colspan="" style="width: 100px;" class="text-center">RT</th>
                <th colspan="" style="width: 100px;" class="text-center">ISS</th>
                <th style="width: 100px;" class="text-center">PAYABLE</th>
                <th style="width: 100px;" class="text-center">MATCHED</th>
                <th style="width: 100px;" class="text-center">PAID</th>
                <th style="width: 100px;" class="text-center">BALANCE</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for contractor in contractors %}
                <tr>
                    <td>
                        <small>{{ contractor.company }}</small>
                        <br>
                        <small>{{ contractor.owner }}</small>
                    </td>
                    <td>
                        <small>{{ contractor.link }}</small>
                    </td>
                    <td>
                        <small>{{ contractor.phone }}</small>
                        <br>
                        <small>{{ contractor.email }}</small>
                    </td>
                    <td>
                        <small>{{ contractor.country }}</small>
                        <br>
                        <small>{{ contractor.city }}</small>
                        ,
                        <small>{{ contractor.postal_code }}</small>
                    </td>
                    <td class="text-center">
                        <small>{{ contractor.recievable.total_returns }}</small>
                    </td>
                    <td>
                        <small>{{ contractor.recievable.total_usage }}</small>
                    </td>
                    <td class="text-center">
                        <small>{{ contractor.payable }}</small>
                    </td>
                    <td class="text-center">
                        <small>{{ contractor.matched }}</small>
                    </td>
                    <td class="text-center">
                        <small>{{ contractor.paid }}</small>
                    </td>
                    <td class="text-center">
                        <small>{{ contractor.balance }}</small>
                    </td>
                    <td>
                        
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton{{ contractor.id }}" data-bs-toggle="dropdown" aria-expanded="false">
                                Actions
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton{{ contractor.id }}">
                                <li><a class="dropdown-item" onclick="ssml.EditContractor('{{contractor.id}}')" href="javascript:void(0);"><i class="bi bi-pencil"></i> Edit</a></li>
                                <li><a class="dropdown-item" href="javascript:void(0);" onclick="ssml.ViewContractorJobs('{{contractor.id}}')"><i class="bi bi-eye"></i> Jobs</a></li>
                                <li><a class="dropdown-item" onclick="ssml.ViewContractor('{{contractor.id}}')" href="javascript:void(0);"><i class="bi bi-eye"></i> View Details</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>   
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}