{% extends 'employee/emp_base.html' %}
{% load static %}

{% block body %}
<div class="card-header">
    <div class="w-100 d-flex">
        <div class="w-50d-flex">
            <button id="apply_for_leave" class="btn btn-info">Apply</button>
            <button class="btn btn-"></button>
        </div>
        <div class="w-50d-flex"></div>
    </div>
</div>
<div class="card-body p-2">
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card bg-light">
                <div class="card-body text-center">
                    <h3 class="card-title" id="total_leaves">0</h3>
                    <p class="card-text">Total Leaves</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-warning text-warning">
                <div class="card-body text-center">
                    <h3 class="card-title" id="pending_leaves">0</h3>
                    <p class="card-text">Pending Leaves</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-secondary text-success">
                <div class="card-body text-center">
                    <h3 class="card-title" id="approved_leaves">0</h3>
                    <p class="card-text">Approved Leaves</p>
                </div>
            </div>
        </div>
    </div>

    <div class="table-responsive">
        <table id="leave_table" class="table table-bordered table-sm table-striped">
            <thead class="mt-2">
                <tr>
                    <th>DATE</th><th>TYPE</th><th>START</th><th>END</th><th>STATUS</th><th>RELIVER</th><th>ACTION</th>
                </tr>
            </thead>
            <tbody id="leave_bd">
                <tr>
                    <td colspan="6">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div
                        ></td>
                </tr>
            </tbody>
        </table>
    </div>

<script>
    let emp_code = `{{my_adon.bio_id}}`
    $(document).ready(function(){
        $('#apply_for_leave').click(function(){
            staff.LeaveRequestForm(emp_code)
        })

        staff.loadMyLeave('*','requested')
    })
</script>
{% endblock %}
